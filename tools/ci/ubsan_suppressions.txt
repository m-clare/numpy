# This file contains suppressions for the default (with GIL) build to prevent runtime errors
# when numpy is built with -Db_sanitize=undefined.
#
# reference: https://clang.llvm.org/docs/UndefinedBehaviorSanitizer.html#available-checks

# Per this prior discussion, integer overflow is not a concern
signed-integer-overflow:*

# performance not correctness issue
alignment:*

# suggested fix, replace left bit shift with LLONG_MIN constant
shift-base:_core/src/common/simd/sse/arithmetic.h
shift-base:_core/src/common/simd/avx2/arithmetic.h

# suggested fix, INT_MIN
shift-base:_core/src/umath/_rational_tests.c
# suggested fix, check for overflow if signed
shift-base:_core/src/npymath/npy_math_internal.h

# suggested fix for passing null, check that pointer is not null before calling function
nonnull-attribute:multiarray/array_coercion.c
nonnull-attribute:multiarray/ctors.c
nonnull-attribute:multiarray/datetime_busdaycal.c
nonnull-attribute:multiarray/scalarapi.c
nonnull-attribute:multiarray/calculation.c

# only this file
# errors at line 76, 93, 102
# suggested fix would be to do a null check before the loop
pointer-overflow:multiarray/nditer_templ.c
